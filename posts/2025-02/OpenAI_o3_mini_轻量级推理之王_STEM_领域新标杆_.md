---
title: "OpenAI o3-mini：轻量级推理之王，STEM 领域新标杆！"
date: 2025-02-02T00:14:18Z
draft: ["false"]
tags: [
  "fetched",
  "浮之静"
]
categories: ["Duty"]
---
OpenAI o3-mini：轻量级推理之王，STEM 领域新标杆！ by 浮之静
------
<div><h1><span>lencx 浅思</span></h1><p><img data-backh="325" data-backw="578" data-imgfileid="100005876" data-ratio="0.562962962962963" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrxzXHHiblJPQKiah1zeQEeRGOEfbtGdCicbicOoHTK6icXfhjHya93AxXHvQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrxzXHHiblJPQKiah1zeQEeRGOEfbtGdCicbicOoHTK6icXfhjHya93AxXHvQ/640?wx_fmt=png&amp;from=appmsg"></p><p>从 AI 发展的现状来看，主要还是以辅助任务为主，虽说 Agent 的终极目标是自动化，但因大模型输出不可控，仍需介入人力来对其结果进行监督和修正。目前主流 AI 主要通过以下形式存在：</p><ul><li><p><strong>Web 网页</strong>：ChatGPT、Claude、Gemini、DeepSeek、豆包、千问、智谱等主流 AI 均是以在线网页为主的对话式聊天。</p></li><li><p><strong>系统应用</strong>：一般由官方提供，相较于网页版，额外提供了一些系统访问能力，可以用来执行更复杂任务（如本地文件读写、系统通知、与第三方应用协作等）。如果按平台划分，可分为 Windows、macOS、Linux、移动端等。如果按代码实现可分为套壳或原生应用。</p></li><ul><li><p><strong>套壳应用</strong>：直接将网页打包成跨平台应用，不需要二次开发，也利于维护。但缺点也十分明显，不是体积过大，就是内存占用过多。常用跨平台打包框架有 Electron、Tauri 等。</p></li><li><p><strong>原生应用</strong>：使用特定平台框架或语言进行开发（如 Swift、Kotlin 等），虽增加了维护复杂性，但往往也会提供更好的性能支持和更复杂的系统调用能力。</p></li></ul><li><p><strong>本地应用</strong>：为了满足特殊需求，一些用户会通过本地模型或第三方 API 来部署自己的服务。这算是比较极客的玩法了，特点是自由度更高，数据可控。至于需要交互的对话界面可通过 GitHub 找到，此领域也特卷，目前很多 AI 类开源项目都支持多模型 API 调用，以满足复杂的用户需求。</p></li><li><p><strong>AI 编程</strong>：据我所知，AI 编程目前主要有两个方向。一种疯狂在卷本地 IDE（可以外挂 docs 等来提高编码准确性），另一种是疯狂卷在线 AI（用自然语言快速搭建网站）。</p></li><ul><li><p><strong>本地 IDE</strong>：<span>GitHub Copilot<sup>[1]</sup></span>、<span>Cursor<sup>[2]</sup></span>、<span>Windsurf<sup>[3]</sup></span>、<span>Trae<sup>[4]</sup></span> 等。</p></li><li><p><strong>在线 AI</strong>：<span>v0<sup>[5]</sup></span>、<span>bolt.new<sup>[6]</sup></span>、<span>Replit AI<sup>[7]</sup></span> 等。</p></li></ul><li><p>...</p></li></ul><p>而 o3-mini 的强大代码能力则让我看到了新可能，它是一种介于半应用和半编程的中间态，让编程小白可以通过自然语言描述快速生成一份本地可执行的代码片段（很适合做本地化小工具或批量任务处理脚本）。这或许就是未来个人的必备技能：</p><ul><li><p>能够将工作或生活中的部分任务抽离成需求描述给 AI，让其进行<span>自动化处理</span>，程序化处理似乎更准确（抽象描述需求的能力）。</p></li><li><p>稍微懂点编程，可以搞定本地代码运行环境，处理一些常见编程错误（知道如何将错误信息发送给 AI，让其修复）。</p></li><li><p>...</p></li></ul><p>这里有一个小思考：代码片段、程序运行环境、以及 AI 之间存在一些关联，似乎可以通过一个应用来进行集中化管理，这或许就是 <a target="_blank" href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzIzNjE2NTI3NQ==&amp;action=getalbum&amp;album_id=3322583984660414465#wechat_redirect" textvalue="Noi" linktype="text" imgurl="" imgdata="null" tab="innerlink" data-linktype="2">Noi</a> 下一步要做的事情。</p><h1><span>o3-mini</span></h1><p>OpenAI 发布了 <span>o3-mini<sup>[8]</sup></span>，这是目前最具成本效益的推理模型（虽然价格依然高于 DeepSeek，但已远低于 o1 了。价格对比见文末附录），现已在 <strong>ChatGPT</strong> 和 <strong>API</strong> 中提供。该模型于 2024 年 12 月首次预览，专为<strong>科学、数学和编程</strong>任务优化，同时具备 OpenAI o1-mini 的低成本和低延迟优势（目前模型选择中已经移除了 o1-mini）。<strong>o1 支持视觉推理但不支持联网搜索，o3-mini 支持联网搜索但不支持视觉。o1 目前仍是更广泛的常识推理模型，而 o3-mini 则为需要精度和速度的技术领域提供了专门的替代方案，大家可根据需要选择对应模型。</strong></p><p><img data-backh="422" data-backw="578" data-imgfileid="100005877" data-ratio="0.7296296296296296" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrpeQLMNYPcWBjScx7qkINmv3IkP0fx88P1XjUjibtnOsyV88p0WcGXmg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrpeQLMNYPcWBjScx7qkINmv3IkP0fx88P1XjUjibtnOsyV88p0WcGXmg/640?wx_fmt=png&amp;from=appmsg"></p><p>值得一提：迫于 DeepSeek 给到的压力，免费版目前可在消息输入框中选择 <code>推理（Reason）</code> 或重新生成响应来试用 OpenAI o3-mini，这是 ChatGPT 首次向免费用户提供推理模型。Plus、Team 用户使用量也从每天 50 次提升至 150 次，Pro 用户则可以无限使用 o3-mini、o3-mini-high（每月 $200 果然不是白花的），企业版将在 2 月份上线。</p><p><img data-backh="321" data-backw="578" data-imgfileid="100005879" data-ratio="0.5555555555555556" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrWfHRYXBoKmyx0mvpB5UicCSEbSmO2tQmSqOg8JLeRbolAdpWN61EsyA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrWfHRYXBoKmyx0mvpB5UicCSEbSmO2tQmSqOg8JLeRbolAdpWN61EsyA/640?wx_fmt=png&amp;from=appmsg"></p><p>刚刚 Sam 爆了一个小彩蛋（压力给到，OpenAI 也开始卖力了）：还有一个 o3-mini 的好东西即将推出——我觉得我们把最好的留到了最后！</p><p><img data-backh="211" data-backw="578" data-imgfileid="100005878" data-ratio="0.36574074074074076" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrlXicLO3ibGwb1VELMvcQ7bRnUs5cJFK45Yf1hR404ZAAVpykAZ1nKPDQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrlXicLO3ibGwb1VELMvcQ7bRnUs5cJFK45Yf1hR404ZAAVpykAZ1nKPDQ/640?wx_fmt=png&amp;from=appmsg"></p><h2><span>模型特性</span></h2><ul><li><p><strong>专注 STEM 领域</strong>：数学、科学、编程能力突出，性能超越 OpenAI o1-mini，并在部分任务上匹敌 OpenAI o1。</p></li><li><p><strong>支持开发者</strong>：支持<strong>函数调用（<span>Function calling<sup>[9]</sup></span>）</strong>、<strong>结构化输出（<span>Structured Outputs<sup>[10]</sup></span>）</strong>、<strong>开发者消息（<span>Developer Messages<sup>[11]</sup></span>）</strong> 等，可直接用于生产环境。</p></li><li><p><strong>三种推理模式</strong>：</p></li><ul><li><p><strong>低推理（low）</strong>：优先速度，适合简单任务。</p></li><li><p><strong>中等推理（medium）</strong>：默认模型，平衡准确性和速度，等效 OpenAI o1。</p></li><li><p><strong>高推理（high）</strong>：更强推理能力，适合复杂任务（如编程、逻辑处理等）。</p></li></ul><li><p><strong>改进搜索</strong>：o3-mini 可与搜索配合，查找带有相关链接的最新答案，这是 OpenAI 集成搜索功能到推理模型中的早期原型。</p></li></ul><p>注：o1 模型不支持的搜索功能现已在 o3-mini 中获得支持。</p><p><img data-backh="655" data-backw="578" data-imgfileid="100005880" data-ratio="1.1324074074074073" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrIIPevfpb6JZ05nm4IsjWAO9jveheIULNzAibkt1mZ8S185hOo4eAicyg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrIIPevfpb6JZ05nm4IsjWAO9jveheIULNzAibkt1mZ8S185hOo4eAicyg/640?wx_fmt=png&amp;from=appmsg"></p><h2><span>性能提升</span></h2><ul><li><p><strong>数学（AIME 2024）</strong>：o3-mini（高推理）达到 87.3% 准确率，比前代模型大幅提升。低推理模式接近 o1-mini，中等推理模式接近 o1，高推理模式超越 o1。</p></li><li><p><strong>博士级科学测试（GPQA Diamond）</strong>：o3-mini（高推理）在生物、化学、物理测试中达 79.7%，在较少的推理工作量下，性能媲美 o1（78.0%）。</p></li><li><p><strong>编程竞赛（Codeforces）</strong>：o3-mini（高推理）在 Codeforces 竞赛编程中达 2130 Elo，比 o1-mini（1650） 高出多个级别。</p></li><li><p><strong>软件工程（SWE-bench）</strong>：o3-mini（高推理）在 SWE-bench 任务中达到 49.3%，超过所有已发布模型。</p></li><li><p><strong>更快响应速度</strong>：相较于 o1-mini，o3-mini（中等推理）平均快 24%，首个 token 延迟降低 2500ms，整体响应时间更短（7.7s vs 10.16s）。</p></li><li><p>...</p></li></ul><p><img data-backh="569" data-backw="578" data-imgfileid="100005881" data-ratio="0.9842592592592593" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahr7qOiapvJdQYo947PdZXZDpeEatEFQLUhVsvZMjpPUZbib7gt33G05Q4Q/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahr7qOiapvJdQYo947PdZXZDpeEatEFQLUhVsvZMjpPUZbib7gt33G05Q4Q/640?wx_fmt=png&amp;from=appmsg"></p><p><img data-backh="499" data-backw="578" data-imgfileid="100005886" data-ratio="0.8629629629629629" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrRHEeVR99h4KEslmmV6vOFqYfzDbib3icAZ8FU1ibVuIVbibnnnzYLPUnLA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrRHEeVR99h4KEslmmV6vOFqYfzDbib3icAZ8FU1ibVuIVbibnnnzYLPUnLA/640?wx_fmt=png&amp;from=appmsg"></p><p><img data-backh="286" data-backw="578" data-imgfileid="100005882" data-ratio="0.49537037037037035" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahr8bK0ZeghicIRCH8qZbJHGyISickMCXiacb78QcxMgEdqxIrlHxE3l7MqA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahr8bK0ZeghicIRCH8qZbJHGyISickMCXiacb78QcxMgEdqxIrlHxE3l7MqA/640?wx_fmt=png&amp;from=appmsg"></p><p><img data-backh="496" data-backw="578" data-imgfileid="100005884" data-ratio="0.8583333333333333" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrfewOqKmxjPialhmFic8FibOUKx48n4Efs4thfgfBAUMQ0RA02HibJ6zJIQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrfewOqKmxjPialhmFic8FibOUKx48n4Efs4thfgfBAUMQ0RA02HibJ6zJIQ/640?wx_fmt=png&amp;from=appmsg"></p><p><img data-backh="653" data-backw="578" data-imgfileid="100005885" data-ratio="1.1287037037037038" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrGRsvCJvfeGgXDJlSRwfrWFeOhzibPUjYmKclPQMu7GWZf0NIB6nDRFg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrGRsvCJvfeGgXDJlSRwfrWFeOhzibPUjYmKclPQMu7GWZf0NIB6nDRFg/640?wx_fmt=png&amp;from=appmsg"></p><p><img data-backh="300" data-backw="578" data-imgfileid="100005883" data-ratio="0.5185185185185185" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahr7T0BPaP6QbHKkKQu68qyz4HAVic6jEkTryFwHFwLA4sZF3tticgwbELw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahr7T0BPaP6QbHKkKQu68qyz4HAVic6jEkTryFwHFwLA4sZF3tticgwbELw/640?wx_fmt=png&amp;from=appmsg"></p><p><img data-backh="278" data-backw="578" data-imgfileid="100005887" data-ratio="0.48055555555555557" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrQEJaia4xIRJJ5yefTa9FowqHtQvYOxUymBB9GPwh1R5ia1RIxl8GsbWw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrQEJaia4xIRJJ5yefTa9FowqHtQvYOxUymBB9GPwh1R5ia1RIxl8GsbWw/640?wx_fmt=png&amp;from=appmsg"></p><p><img data-backh="761" data-backw="578" data-imgfileid="100005888" data-ratio="1.3175925925925926" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrPOf9xT0sjFFwYWD3rbXKUHUg9k15df3QE62Kic8NHcDCev4eIdyxy1g/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrPOf9xT0sjFFwYWD3rbXKUHUg9k15df3QE62Kic8NHcDCev4eIdyxy1g/640?wx_fmt=png&amp;from=appmsg"></p><p><img data-backh="682" data-backw="578" data-imgfileid="100005889" data-ratio="1.1796296296296296" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrWEydr7HLJPrpicSxjNZ6jZxLjZ3EjSMkyhASASY8kYcQNqayD2dsJrA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrWEydr7HLJPrpicSxjNZ6jZxLjZ3EjSMkyhASASY8kYcQNqayD2dsJrA/640?wx_fmt=png&amp;from=appmsg"></p><h2><span>安全性</span></h2><p>采用<strong>审议对齐</strong>（<span>deliberative alignment<sup>[12]</sup></span>）训练策略（即在回答用户问题前，训练模型推理人类编写的安全规范），确保更强的安全性，在越狱（Jailbreak）测试中优于 GPT-4o。</p><p><img data-backh="434" data-backw="578" data-imgfileid="100005890" data-ratio="0.7518518518518519" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrFMxQubRicJiaYzMHZCz9O6bcn7fPnxMxic7s66WI8TqqNuiaod6q6XBshg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrFMxQubRicJiaYzMHZCz9O6bcn7fPnxMxic7s66WI8TqqNuiaod6q6XBshg/640?wx_fmt=png&amp;from=appmsg"></p><h1><span>案例分享</span></h1><p>上面扯了那么多，对普通人而言并不直观。为了更好的感受 o3-mini，我测试了一些 prompt，感兴趣的朋友可以动手尝试（以下示例均为一次提问直出效果，无需多次迭代）。关于测试 prompt 的一些小技巧：</p><ul><li><p>请在单个文件中实现代码</p></li><li><p>尽量不要使用依赖</p></li></ul><h2><span>案例</span></h2><h3><span>贪吃蛇</span></h3><blockquote><span>📌 Prompt</span><span><p>V1: create a snake game, where snakes compete with each other.</p><blockquote><p>翻译：创建一个贪吃蛇游戏，让它们相互竞争。</p></blockquote><p>V2: add score tracking, a pause button, and a restart button.</p><blockquote><p>翻译：添加分数跟踪、暂停按钮和重启按钮。</p></blockquote></span></blockquote><section><iframe data-vidtype="2" data-mpvid="wxv_3838971147407818753" data-cover="http%3A%2F%2Fmmbiz.qpic.cn%2Fmmbiz_jpg%2F90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahr97gp2y7bOdFJmLCFel3UicGNlMr9OxziaDacpGGhc0Ja9PPNWUxDhJ5w%2F0%3Fwx_fmt%3Djpeg" allowfullscreen="" frameborder="0" data-ratio="1.7777777777777777" data-w="1920" data-src="https://mp.weixin.qq.com/mp/readtemplate?t=pages/video_player_tmpl&amp;action=mpvideo&amp;auto=0&amp;vid=wxv_3838971147407818753"></iframe></section><p>可将以下代码保存在本地，通过 python 命令运行。</p><pre><code><span>import</span> pygame<br><span>import</span> random<br><span>import</span> sys<br><br><span># --- Game Settings ---</span><br>GRID_SIZE   = <span>20</span>                       <span># Size (in pixels) of each grid cell</span><br>GRID_WIDTH  = <span>30</span>                       <span># Number of cells horizontally</span><br>GRID_HEIGHT = <span>30</span>                       <span># Number of cells vertically</span><br><br>WINDOW_WIDTH  = GRID_WIDTH * GRID_SIZE<br>WINDOW_HEIGHT = GRID_HEIGHT * GRID_SIZE<br><br>FPS = <span>10</span>                               <span># Game speed (frames per second)</span><br><br><span># --- Colors ---</span><br>BLACK   = (<span>0</span>, <span>0</span>, <span>0</span>)<br>WHITE   = (<span>255</span>, <span>255</span>, <span>255</span>)<br>RED     = (<span>255</span>, <span>0</span>, <span>0</span>)<br>GREEN   = (<span>0</span>, <span>255</span>, <span>0</span>)<br>BLUE    = (<span>0</span>, <span>0</span>, <span>255</span>)<br>YELLOW  = (<span>255</span>, <span>255</span>, <span>0</span>)<br>GRAY    = (<span>100</span>, <span>100</span>, <span>100</span>)<br><br><span># --- Directions ---</span><br>UP    = (<span>0</span>, -<span>1</span>)<br>DOWN  = (<span>0</span>, <span>1</span>)<br>LEFT  = (-<span>1</span>, <span>0</span>)<br>RIGHT = (<span>1</span>, <span>0</span>)<br><br><span># --- Snake Class ---</span><br><span>class</span> <span>Snake</span>:<br>    <span>def</span> <span>__init__</span>(<span>self, start_pos, color</span>):<br>        self.body = [start_pos]      <span># The snake is a list of (x,y) positions</span><br>        self.direction = random.choice([UP, DOWN, LEFT, RIGHT])<br>        self.color = color<br>        self.alive = <span>True</span><br>        self.score = <span>0</span><br><br>    <span>def</span> <span>get_head</span>(<span>self</span>):<br>        <span>return</span> self.body[<span>0</span>]<br><br>    <span>def</span> <span>move</span>(<span>self, grow=<span>False</span></span>):<br>        <span>"""Advance the snake one step in its current direction.<br>           If grow is True, the snake’s tail is not removed."""</span><br>        <span>if</span> <span>not</span> self.alive:<br>            <span>return</span><br>        head_x, head_y = self.get_head()<br>        dx, dy = self.direction<br>        new_head = (head_x + dx, head_y + dy)<br>        self.body.insert(<span>0</span>, new_head)<br>        <span>if</span> <span>not</span> grow:<br>            self.body.pop()<br><br>    <span>def</span> <span>set_direction</span>(<span>self, new_direction</span>):<br>        <span>"""Set a new direction for the snake. Prevent reversing if length &gt; 1."""</span><br>        <span>if</span> <span>len</span>(self.body) &gt; <span>1</span>:<br>            cur_dx, cur_dy = self.direction<br>            <span># Prevent 180° turn:</span><br>            <span>if</span> (cur_dx * -<span>1</span>, cur_dy * -<span>1</span>) == new_direction:<br>                <span>return</span><br>        self.direction = new_direction<br><br>    <span>def</span> <span>is_direction_safe</span>(<span>self, direction, snakes</span>):<br>        <span>"""Check if moving in the given direction would cause an immediate collision."""</span><br>        head_x, head_y = self.get_head()<br>        dx, dy = direction<br>        new_head = (head_x + dx, head_y + dy)<br>        <span># Check board boundaries</span><br>        <span>if</span> <span>not</span> (<span>0</span> &lt;= new_head[<span>0</span>] &lt; GRID_WIDTH <span>and</span> <span>0</span> &lt;= new_head[<span>1</span>] &lt; GRID_HEIGHT):<br>            <span>return</span> <span>False</span><br>        <span># Check collision with any snake’s body (including self)</span><br>        <span>for</span> snake <span>in</span> snakes:<br>            <span>if</span> new_head <span>in</span> snake.body:<br>                <span>return</span> <span>False</span><br>        <span>return</span> <span>True</span><br><br>    <span>def</span> <span>update_ai</span>(<span>self, food_list, snakes</span>):<br>        <span>"""Simple AI: choose a direction that moves toward the closest food.<br>           If that direction isn’t safe, try the other options."""</span><br>        <span>if</span> <span>not</span> food_list:<br>            <span>return</span><br><br>        head = self.get_head()<br>        <span># Find the food item with the smallest Manhattan distance:</span><br>        closest_food = <span>min</span>(food_list, key=<span>lambda</span> f: <span>abs</span>(f[<span>0</span>]-head[<span>0</span>]) + <span>abs</span>(f[<span>1</span>]-head[<span>1</span>]))<br>        dx = closest_food[<span>0</span>] - head[<span>0</span>]<br>        dy = closest_food[<span>1</span>] - head[<span>1</span>]<br><br>        <span># Build a prioritized list of directions toward the food:</span><br>        possible_directions = []<br>        <span>if</span> dx &gt; <span>0</span>:<br>            possible_directions.append(RIGHT)<br>        <span>elif</span> dx &lt; <span>0</span>:<br>            possible_directions.append(LEFT)<br>        <span>if</span> dy &gt; <span>0</span>:<br>            possible_directions.append(DOWN)<br>        <span>elif</span> dy &lt; <span>0</span>:<br>            possible_directions.append(UP)<br>        <span># Append the remaining directions:</span><br>        <span>for</span> d <span>in</span> [UP, DOWN, LEFT, RIGHT]:<br>            <span>if</span> d <span>not</span> <span>in</span> possible_directions:<br>                possible_directions.append(d)<br><br>        <span># Choose the first safe direction:</span><br>        <span>for</span> d <span>in</span> possible_directions:<br>            <span>if</span> self.is_direction_safe(d, snakes):<br>                self.set_direction(d)<br>                <span>return</span><br><br>        <span># If no “preferred” direction is safe, pick any safe direction:</span><br>        safe_dirs = [d <span>for</span> d <span>in</span> [UP, DOWN, LEFT, RIGHT] <span>if</span> self.is_direction_safe(d, snakes)]<br>        <span>if</span> safe_dirs:<br>            self.set_direction(random.choice(safe_dirs))<br>        <span># Otherwise, no safe move is available; the snake will collide soon.</span><br><br><span># --- Game Class ---</span><br><span>class</span> <span>Game</span>:<br>    <span>def</span> <span>__init__</span>(<span>self</span>):<br>        pygame.init()<br>        self.screen = pygame.display.set_mode((WINDOW_WIDTH, WINDOW_HEIGHT))<br>        pygame.display.set_caption(<span>"Autonomous Snake Competition"</span>)<br>        self.clock = pygame.time.Clock()<br>        self.font = pygame.font.SysFont(<span>None</span>, <span>24</span>)<br>        self.init_game_state()<br><br>    <span>def</span> <span>init_game_state</span>(<span>self</span>):<br>        <span>"""Initialize or reset the game state (snakes, food, pause flag)."""</span><br>        <span># Create several snakes with different starting positions and colors:</span><br>        self.snakes = []<br>        colors = [GREEN, BLUE, YELLOW, RED]<br>        starting_positions = [<br>            (<span>5</span>, <span>5</span>),<br>            (GRID_WIDTH - <span>6</span>, GRID_HEIGHT - <span>6</span>),<br>            (<span>5</span>, GRID_HEIGHT - <span>6</span>),<br>            (GRID_WIDTH - <span>6</span>, <span>5</span>)<br>        ]<br>        <span>for</span> i <span>in</span> <span>range</span>(<span>len</span>(colors)):<br>            self.snakes.append(Snake(starting_positions[i], colors[i]))<br><br>        self.food_list = []<br>        self.spawn_food(count=<span>5</span>)  <span># Start with 5 food items</span><br><br>        <span># Game control flags</span><br>        self.paused = <span>False</span><br><br>    <span>def</span> <span>reset</span>(<span>self</span>):<br>        <span>"""Restart the game by reinitializing the game state."""</span><br>        self.init_game_state()<br><br>    <span>def</span> <span>spawn_food</span>(<span>self, count=<span>1</span></span>):<br>        <span>"""Spawn the given number of food items."""</span><br>        <span>for</span> _ <span>in</span> <span>range</span>(count):<br>            self.add_food()<br><br>    <span>def</span> <span>add_food</span>(<span>self</span>):<br>        <span>"""Place a food item at a random empty cell."""</span><br>        <span>while</span> <span>True</span>:<br>            pos = (random.randint(<span>0</span>, GRID_WIDTH - <span>1</span>), random.randint(<span>0</span>, GRID_HEIGHT - <span>1</span>))<br>            <span># Ensure no snake occupies this cell and it isn’t already food</span><br>            collision = <span>any</span>(pos <span>in</span> snake.body <span>for</span> snake <span>in</span> self.snakes) <span>or</span> pos <span>in</span> self.food_list<br>            <span>if</span> <span>not</span> collision:<br>                self.food_list.append(pos)<br>                <span>break</span><br><br>    <span>def</span> <span>draw_scores</span>(<span>self</span>):<br>        <span>"""Render the score for each snake on the screen."""</span><br>        y_offset = <span>5</span><br>        <span>for</span> i, snake <span>in</span> <span>enumerate</span>(self.snakes):<br>            status = <span>"Alive"</span> <span>if</span> snake.alive <span>else</span> <span>"Dead"</span><br>            text_str = <span>f"Snake <span>{i+<span>1</span>}</span> Score: <span>{snake.score}</span> (<span>{status}</span>)"</span><br>            text = self.font.render(text_str, <span>True</span>, WHITE)<br>            self.screen.blit(text, (<span>5</span>, y_offset))<br>            y_offset += <span>20</span><br><br>    <span>def</span> <span>draw_instructions</span>(<span>self</span>):<br>        <span>"""Display instructions for pausing and restarting."""</span><br>        instructions = <span>"Press 'P' to pause/resume, 'R' to restart"</span><br>        text = self.font.render(instructions, <span>True</span>, WHITE)<br>        self.screen.blit(text, (<span>5</span>, WINDOW_HEIGHT - <span>25</span>))<br><br>    <span>def</span> <span>run</span>(<span>self</span>):<br>        running = <span>True</span><br>        <span>while</span> running:<br>            self.clock.tick(FPS)<br><br>            <span># --- Event Handling ---</span><br>            <span>for</span> event <span>in</span> pygame.event.get():<br>                <span>if</span> event.<span>type</span> == pygame.QUIT:<br>                    running = <span>False</span><br>                <span>elif</span> event.<span>type</span> == pygame.KEYDOWN:<br>                    <span>if</span> event.key == pygame.K_p:<br>                        self.paused = <span>not</span> self.paused<br>                    <span>elif</span> event.key == pygame.K_r:<br>                        self.reset()<br><br>            <span>if</span> <span>not</span> self.paused:<br>                <span># Update AI for each alive snake</span><br>                alive_snakes = [snake <span>for</span> snake <span>in</span> self.snakes <span>if</span> snake.alive]<br>                random.shuffle(alive_snakes)<br>                <span>for</span> snake <span>in</span> alive_snakes:<br>                    snake.update_ai(self.food_list, self.snakes)<br><br>                <span># Move each snake and check for collisions</span><br>                <span>for</span> snake <span>in</span> alive_snakes:<br>                    <span>if</span> <span>not</span> snake.alive:<br>                        <span>continue</span><br>                    head_before = snake.get_head()<br>                    new_head = (head_before[<span>0</span>] + snake.direction[<span>0</span>], head_before[<span>1</span>] + snake.direction[<span>1</span>])<br><br>                    <span># Check wall collisions</span><br>                    <span>if</span> <span>not</span> (<span>0</span> &lt;= new_head[<span>0</span>] &lt; GRID_WIDTH <span>and</span> <span>0</span> &lt;= new_head[<span>1</span>] &lt; GRID_HEIGHT):<br>                        snake.alive = <span>False</span><br>                        <span>continue</span><br><br>                    <span># Check collisions with any snake’s body (using the current board state)</span><br>                    collision = <span>False</span><br>                    <span>for</span> other <span>in</span> self.snakes:<br>                        <span>if</span> new_head <span>in</span> other.body:<br>                            collision = <span>True</span><br>                            <span>break</span><br>                    <span>if</span> collision:<br>                        snake.alive = <span>False</span><br>                        <span>continue</span><br><br>                    <span># Check if food is at the new head position:</span><br>                    <span>if</span> new_head <span>in</span> self.food_list:<br>                        snake.move(grow=<span>True</span>)<br>                        snake.score += <span>1</span><br>                        self.food_list.remove(new_head)<br>                        self.add_food()  <span># Replace the eaten food</span><br>                    <span>else</span>:<br>                        snake.move(grow=<span>False</span>)<br><br>            <span># --- Rendering ---</span><br>            self.screen.fill(BLACK)<br><br>            <span># Draw food items</span><br>            <span>for</span> food <span>in</span> self.food_list:<br>                rect = pygame.Rect(food[<span>0</span>] * GRID_SIZE, food[<span>1</span>] * GRID_SIZE, GRID_SIZE, GRID_SIZE)<br>                pygame.draw.rect(self.screen, RED, rect)<br><br>            <span># Draw each snake</span><br>            <span>for</span> snake <span>in</span> self.snakes:<br>                color = snake.color <span>if</span> snake.alive <span>else</span> GRAY<br>                <span>for</span> segment <span>in</span> snake.body:<br>                    rect = pygame.Rect(segment[<span>0</span>] * GRID_SIZE, segment[<span>1</span>] * GRID_SIZE, GRID_SIZE, GRID_SIZE)<br>                    pygame.draw.rect(self.screen, color, rect)<br><br>            <span># Draw the scoreboard and instructions</span><br>            self.draw_scores()<br>            self.draw_instructions()<br><br>            <span># If paused, overlay a pause message</span><br>            <span>if</span> self.paused:<br>                pause_text = self.font.render(<span>"Paused"</span>, <span>True</span>, WHITE)<br>                text_rect = pause_text.get_rect(center=(WINDOW_WIDTH // <span>2</span>, WINDOW_HEIGHT // <span>2</span>))<br>                self.screen.blit(pause_text, text_rect)<br><br>            pygame.display.flip()<br><br>        pygame.quit()<br>        <span># --- Final Score Display ---</span><br>        <span>print</span>(<span>"\n--- Final Scores ---"</span>)<br>        <span>for</span> i, snake <span>in</span> <span>enumerate</span>(self.snakes):<br>            status = <span>"Alive"</span> <span>if</span> snake.alive <span>else</span> <span>"Dead"</span><br>            <span>print</span>(<span>f"Snake <span>{i + <span>1</span>}</span> (<span>{snake.color}</span>): Score = <span>{snake.score}</span> (<span>{status}</span>)"</span>)<br><br><span># --- Run the Game ---</span><br><span>if</span> __name__ == <span>"__main__"</span>:<br>    game = Game()<br>    game.run()<br></code></pre><h3><span>彩球碰撞</span></h3><blockquote><span>📌 Prompt</span><span><p>Create a p5.js script that generates 100 colorful balls bouncing inside a slowly rotating sphere. Each ball should leave a fading trail, and collisions with the sphere boundary should trigger a particle effect scaled by collision strength. Ensure accurate collision detection so the balls remain within the sphere.</p><blockquote><p>翻译：创建一个 p5.js 脚本，生成 100 个彩色球，它们在缓慢旋转的球体内弹跳。每个球都应留下一条逐渐消失的轨迹，与球体边界的碰撞应触发按碰撞强度缩放的粒子效果。确保准确的碰撞检测，使球保持在球体内。</p></blockquote></span></blockquote><section><iframe data-vidtype="2" data-mpvid="wxv_3838982193275731968" data-cover="http%3A%2F%2Fmmbiz.qpic.cn%2Fmmbiz_jpg%2F90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrIovibH3E2g5nQSQzQ3bJGZfxhHXcPFCjT9fL9T9NjaCAJtn3jYnLsrQ%2F0%3Fwx_fmt%3Djpeg" allowfullscreen="" frameborder="0" data-ratio="1.6462962962962964" data-w="1778" data-src="https://mp.weixin.qq.com/mp/readtemplate?t=pages/video_player_tmpl&amp;action=mpvideo&amp;auto=0&amp;vid=wxv_3838982193275731968"></iframe></section><p>可将代码粘贴于 p5.js 在线编辑器中查看效果：<code>https://editor.p5js.org</code></p><pre><code><span>// Global settings</span><br><span>let</span> sphereRadius = <span>300</span>;      <span>// Radius of the enclosing sphere</span><br><span>let</span> numBalls = <span>100</span>;          <span>// How many balls to create</span><br><span>let</span> balls = [];              <span>// Array to store Ball objects</span><br><span>let</span> particles = [];          <span>// Array to store Particle objects</span><br><span>let</span> angle = <span>0</span>;               <span>// Global rotation angle</span><br><br><span>function</span> <span>setup</span>() {<br>  <span>createCanvas</span>(windowWidth, windowHeight, <span>WEBGL</span>);<br>  <span>// Create the bouncing balls</span><br>  <span>for</span> (<span>let</span> i = <span>0</span>; i &lt; numBalls; i++) {<br>    balls.<span>push</span>(<span>new</span> <span>Ball</span>());<br>  }<br>}<br><br><span>function</span> <span>draw</span>() {<br>  <span>background</span>(<span>0</span>);<br>  <br>  <span>// Slowly rotate the whole scene</span><br>  angle += <span>0.005</span>;<br>  <span>rotateY</span>(angle);<br>  <span>rotateX</span>(angle * <span>0.3</span>);<br><br>  <span>// Draw the transparent sphere boundary (wireframe-like)</span><br>  <span>stroke</span>(<span>255</span>, <span>150</span>);<br>  <span>noFill</span>();<br>  <span>strokeWeight</span>(<span>2</span>);<br>  <span>sphere</span>(sphereRadius);<br><br>  <span>// Update and draw each ball</span><br>  <span>for</span> (<span>let</span> ball <span>of</span> balls) {<br>    ball.<span>update</span>();<br>    ball.<span>draw</span>();<br>  }<br><br>  <span>// Update and draw all particles (from collisions)</span><br>  <span>for</span> (<span>let</span> i = particles.<span>length</span> - <span>1</span>; i &gt;= <span>0</span>; i--) {<br>    particles[i].<span>update</span>();<br>    particles[i].<span>draw</span>();<br>    <span>if</span> (particles[i].<span>lifespan</span> &lt;= <span>0</span>) {<br>      particles.<span>splice</span>(i, <span>1</span>);<br>    }<br>  }<br>}<br><br><span>function</span> <span>windowResized</span>() {<br>  <span>resizeCanvas</span>(windowWidth, windowHeight);<br>}<br><br><span>// ─────────────────────────────────────────────────────────────</span><br><span>// Ball class: Each ball has a position, velocity, color, size,</span><br><span>// and it remembers a short trail of past positions for the fading tail.</span><br><span>// ─────────────────────────────────────────────────────────────</span><br><span>class</span> <span>Ball</span> {<br>  <span>constructor</span>() {<br>    <span>// Give the ball a random radius between 5 and 15</span><br>    <span>this</span>.<span>radius</span> = <span>random</span>(<span>5</span>, <span>15</span>);<br>    <span>// Start at a random point inside the sphere (keeping enough room)</span><br>    <span>let</span> r = <span>random</span>(<span>0</span>, sphereRadius - <span>this</span>.<span>radius</span>);<br>    <span>this</span>.<span>pos</span> = p5.<span>Vector</span>.<span>random3D</span>().<span>mult</span>(r);<br>    <span>// Set a random 3D velocity</span><br>    <span>this</span>.<span>vel</span> = p5.<span>Vector</span>.<span>random3D</span>().<span>mult</span>(<span>random</span>(<span>1</span>, <span>3</span>));<br>    <span>// Pick a random bright color</span><br>    <span>this</span>.<span>color</span> = <span>color</span>(<span>random</span>(<span>50</span>, <span>255</span>), <span>random</span>(<span>50</span>, <span>255</span>), <span>random</span>(<span>50</span>, <span>255</span>));<br>    <span>// For storing recent positions to draw the trail</span><br>    <span>this</span>.<span>trail</span> = [];<br>    <span>this</span>.<span>maxTrailLength</span> = <span>20</span>;<br>  }<br>  <br>  <span>update</span>() {<br>    <span>// Record the current position for the trail</span><br>    <span>this</span>.<span>trail</span>.<span>push</span>(<span>this</span>.<span>pos</span>.<span>copy</span>());<br>    <span>if</span> (<span>this</span>.<span>trail</span>.<span>length</span> &gt; <span>this</span>.<span>maxTrailLength</span>) {<br>      <span>this</span>.<span>trail</span>.<span>shift</span>();<br>    }<br>    <br>    <span>// Move the ball</span><br>    <span>this</span>.<span>pos</span>.<span>add</span>(<span>this</span>.<span>vel</span>);<br>    <br>    <span>// Collision detection with the inner wall of the sphere:</span><br>    <span>// If the ball (including its own radius) goes past the boundary...</span><br>    <span>let</span> distFromCenter = <span>this</span>.<span>pos</span>.<span>mag</span>();<br>    <span>if</span> (distFromCenter + <span>this</span>.<span>radius</span> &gt; sphereRadius) {<br>      <span>// Compute the normal at the collision point (pointing outward)</span><br>      <span>let</span> normal = <span>this</span>.<span>pos</span>.<span>copy</span>().<span>normalize</span>();<br>      <span>// Calculate how far the ball is beyond the allowed boundary</span><br>      <span>let</span> penetration = (distFromCenter + <span>this</span>.<span>radius</span>) - sphereRadius;<br>      <br>      <span>// Reflect the velocity along the normal direction:</span><br>      <span>// v' = v - 2 (v·n) n</span><br>      <span>let</span> dot = <span>this</span>.<span>vel</span>.<span>dot</span>(normal);<br>      <span>if</span> (dot &gt; <span>0</span>) { <span>// only reflect if moving outward</span><br>        <span>this</span>.<span>vel</span>.<span>sub</span>(p5.<span>Vector</span>.<span>mult</span>(normal, <span>2</span> * dot));<br>      }<br>      <br>      <span>// Reposition the ball so it sits exactly inside the sphere</span><br>      <span>this</span>.<span>pos</span> = normal.<span>mult</span>(sphereRadius - <span>this</span>.<span>radius</span>);<br>      <br>      <span>// Trigger a particle burst whose intensity depends on the collision strength.</span><br>      <span>// Here, we use the absolute value of the normal component of velocity.</span><br>      <span>let</span> collisionStrength = <span>abs</span>(dot);<br>      <span>// Decide the number of particles (between 5 and 20)</span><br>      <span>let</span> numParticles = <span>constrain</span>(<span>floor</span>(collisionStrength * <span>5</span>), <span>5</span>, <span>20</span>);<br>      <span>for</span> (<span>let</span> i = <span>0</span>; i &lt; numParticles; i++) {<br>        particles.<span>push</span>(<span>new</span> <span>Particle</span>(<span>this</span>.<span>pos</span>.<span>copy</span>(), <span>this</span>.<span>color</span>, collisionStrength));<br>      }<br>    }<br>  }<br>  <br>  <span>draw</span>() {<br>    <span>// Draw the ball itself</span><br>    <span>noStroke</span>();<br>    <span>fill</span>(<span>this</span>.<span>color</span>);<br>    <span>push</span>();<br>    <span>translate</span>(<span>this</span>.<span>pos</span>.<span>x</span>, <span>this</span>.<span>pos</span>.<span>y</span>, <span>this</span>.<span>pos</span>.<span>z</span>);<br>    <span>sphere</span>(<span>this</span>.<span>radius</span>);<br>    <span>pop</span>();<br>    <br>    <span>// Draw the trail as a series of line segments that gradually become more opaque.</span><br>    <span>// (Old segments are more transparent.)</span><br>    <span>for</span> (<span>let</span> i = <span>0</span>; i &lt; <span>this</span>.<span>trail</span>.<span>length</span> - <span>1</span>; i++) {<br>      <span>// Map the segment index to an alpha value (0 for the oldest, 255 for the newest)</span><br>      <span>let</span> alpha = <span>map</span>(i, <span>0</span>, <span>this</span>.<span>trail</span>.<span>length</span> - <span>1</span>, <span>0</span>, <span>255</span>);<br>      <span>stroke</span>(<span>red</span>(<span>this</span>.<span>color</span>), <span>green</span>(<span>this</span>.<span>color</span>), <span>blue</span>(<span>this</span>.<span>color</span>), alpha);<br>      <span>strokeWeight</span>(<span>2</span>);<br>      <span>let</span> pos1 = <span>this</span>.<span>trail</span>[i];<br>      <span>let</span> pos2 = <span>this</span>.<span>trail</span>[i + <span>1</span>];<br>      <span>line</span>(pos1.<span>x</span>, pos1.<span>y</span>, pos1.<span>z</span>, pos2.<span>x</span>, pos2.<span>y</span>, pos2.<span>z</span>);<br>    }<br>  }<br>}<br><br><span>// ─────────────────────────────────────────────────────────────</span><br><span>// Particle class: Each particle emerges from a collision.</span><br><span>// It starts at the collision point, moves with a bit of randomness (and damping),</span><br><span>// and fades out (its lifespan decreases) until it is removed.</span><br><span>// ─────────────────────────────────────────────────────────────</span><br><span>class</span> <span>Particle</span> {<br>  <span>constructor</span>(<span>position, ballColor, collisionStrength</span>) {<br>    <span>this</span>.<span>pos</span> = position.<span>copy</span>();<br>    <span>// Use the collision point’s outward normal and add a bit of random direction</span><br>    <span>let</span> normal = position.<span>copy</span>().<span>normalize</span>();<br>    <span>this</span>.<span>vel</span> = p5.<span>Vector</span>.<span>add</span>(normal, p5.<span>Vector</span>.<span>random3D</span>().<span>mult</span>(<span>0.5</span>))<br>                          .<span>mult</span>(<span>random</span>(<span>1</span>, collisionStrength * <span>3</span>));<br>    <span>this</span>.<span>lifespan</span> = <span>255</span>;  <span>// This value is used to fade the particle</span><br>    <span>this</span>.<span>size</span> = <span>random</span>(<span>2</span>, <span>5</span>);<br>    <span>this</span>.<span>color</span> = ballColor;<br>  }<br>  <br>  <span>update</span>() {<br>    <span>this</span>.<span>pos</span>.<span>add</span>(<span>this</span>.<span>vel</span>);<br>    <span>// Apply a damping so the particles slow down</span><br>    <span>this</span>.<span>vel</span>.<span>mult</span>(<span>0.95</span>);<br>    <span>// Reduce lifespan (fading effect)</span><br>    <span>this</span>.<span>lifespan</span> -= <span>5</span>;<br>  }<br>  <br>  <span>draw</span>() {<br>    <span>noStroke</span>();<br>    <span>fill</span>(<span>red</span>(<span>this</span>.<span>color</span>), <span>green</span>(<span>this</span>.<span>color</span>), <span>blue</span>(<span>this</span>.<span>color</span>), <span>this</span>.<span>lifespan</span>);<br>    <span>push</span>();<br>    <span>translate</span>(<span>this</span>.<span>pos</span>.<span>x</span>, <span>this</span>.<span>pos</span>.<span>y</span>, <span>this</span>.<span>pos</span>.<span>z</span>);<br>    <span>sphere</span>(<span>this</span>.<span>size</span>);<br>    <span>pop</span>();<br>  }<br>}<br></code></pre><h3><span>海浪</span></h3><blockquote><span>📌 Prompt</span><span><p>create a visually interesting shader that can run in twigl-dot-app make it like the ocean in a storm...</p><blockquote><p>翻译：创建一个可以在 twigl-dot-app 中运行的视觉上有趣的着色器，使其像暴风雨中的海洋一样…</p></blockquote><p>make it even more interesting</p><blockquote><p>翻译：让它变得更加有趣</p></blockquote></span></blockquote><section><iframe data-vidtype="2" data-mpvid="wxv_3838980862739382274" data-cover="http%3A%2F%2Fmmbiz.qpic.cn%2Fmmbiz_jpg%2F90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrSfjNFeLfsOm5A0IY1iamxibgoSFehLhOeibM1CSzOYbrrlTRWv4Ma61icA%2F0%3Fwx_fmt%3Djpeg" allowfullscreen="" frameborder="0" data-ratio="1.6444444444444444" data-w="1776" data-src="https://mp.weixin.qq.com/mp/readtemplate?t=pages/video_player_tmpl&amp;action=mpvideo&amp;auto=0&amp;vid=wxv_3838980862739382274"></iframe></section><p>可将代码粘贴于 twigl 在线编辑器中查看效果：<code>https://twigl.app</code></p><pre><code><span>#ifdef GL_ES</span><br><span>precision</span> <span>mediump</span> <span>float</span>;<br><span>#endif</span><br><br><span>uniform</span> <span>float</span> time;<br><span>uniform</span> <span>vec2</span> resolution;<br><br><span>// ---------------------------------------------------------------------------</span><br><span>// Basic noise functions</span><br><span>// ---------------------------------------------------------------------------</span><br><br><span>// A simple 2D hash function</span><br><span>float</span> hash(<span>vec2</span> p) {<br>  <span>return</span> <span>fract</span>(<span>sin</span>(<span>dot</span>(p, <span>vec2</span>(<span>127.1</span>, <span>311.7</span>))) * <span>43758.5453123</span>);<br>}<br><br><span>// Basic 2D noise (value noise)</span><br><span>float</span> noise(<span>vec2</span> p) {<br>  <span>vec2</span> i = <span>floor</span>(p);<br>  <span>vec2</span> f = <span>fract</span>(p);<br>  <br>  <span>float</span> a = hash(i);<br>  <span>float</span> b = hash(i + <span>vec2</span>(<span>1.0</span>, <span>0.0</span>));<br>  <span>float</span> c = hash(i + <span>vec2</span>(<span>0.0</span>, <span>1.0</span>));<br>  <span>float</span> d = hash(i + <span>vec2</span>(<span>1.0</span>, <span>1.0</span>));<br>  <br>  <span>// Smooth interpolation</span><br>  <span>vec2</span> u = f * f * (<span>3.0</span> - <span>2.0</span> * f);<br>  <br>  <span>return</span> <span>mix</span>(a, b, u.x) +<br>         (c - a) * u.y * (<span>1.0</span> - u.x) +<br>         (d - b) * u.x * u.y;<br>}<br><br><span>// Fractal Brownian Motion (fbm) for layered noise</span><br><span>float</span> fbm(<span>vec2</span> p) {<br>  <span>float</span> total = <span>0.0</span>;<br>  <span>float</span> amplitude = <span>0.5</span>;<br>  <span>for</span> (<span>int</span> i = <span>0</span>; i &lt; <span>6</span>; i++) {<br>    total += amplitude * noise(p);<br>    p *= <span>2.0</span>;<br>    amplitude *= <span>0.5</span>;<br>  }<br>  <span>return</span> total;<br>}<br><br><span>// ---------------------------------------------------------------------------</span><br><span>// Main Shader – Enhanced Stormy Ocean</span><br><span>// ---------------------------------------------------------------------------</span><br><span>void</span> main() {<br>  <span>// Normalize and center coordinates (preserving aspect ratio)</span><br>  <span>vec2</span> uv = (<span>gl_FragCoord</span>.xy - <span>0.5</span> * resolution.xy) / resolution.y;<br>  <br>  <span>// -- Swirling Vortex Distortion --</span><br>  <span>// Create a vortex-like swirl near the center to simulate turbulent eddies.</span><br>  <span>vec2</span> diff = uv;<br>  <span>float</span> dist = <span>length</span>(diff);<br>  <span>// The rotation angle is modulated by an exponential falloff so the swirl is stronger near the center.</span><br>  <span>float</span> angle = <span>atan</span>(diff.y, diff.x) + <span>0.3</span> * <span>exp</span>(-dist * <span>3.0</span>) * <span>sin</span>(time * <span>1.5</span>);<br>  <span>vec2</span> uvSwirl = <span>vec2</span>(<span>cos</span>(angle), <span>sin</span>(angle)) * dist;<br>  <br>  <span>// -- Base Wave Layers --</span><br>  <span>// Combine a sine wave with layered fbm noise to create dynamic, multi-scale waves.</span><br>  <span>float</span> wave1 = <span>sin</span>(uvSwirl.x * <span>8.0</span> + time * <span>2.0</span>);<br>  <span>float</span> wave2 = fbm(uvSwirl * <span>3.0</span> - time * <span>0.5</span>);<br>  <span>float</span> wave3 = fbm(uvSwirl * <span>10.0</span> + time * <span>1.2</span>);<br>  <span>float</span> combinedWaves = wave1 * <span>0.4</span> + wave2 * <span>0.4</span> + wave3 * <span>0.2</span>;<br>  <br>  <span>// -- Fine Ripple Distortion --</span><br>  <span>// Add a secondary, high-frequency ripple to the coordinates for extra surface detail.</span><br>  <span>vec2</span> ripple = <span>vec2</span>(fbm(uvSwirl * <span>20.0</span> + time), fbm(uvSwirl * <span>20.0</span> - time));<br>  <span>vec2</span> uvRipple = uvSwirl + ripple * <span>0.02</span>;<br>  <br>  <span>// Recompute fine wave details with the rippled coordinates.</span><br>  <span>float</span> detail = fbm(uvRipple * <span>15.0</span> - time);<br>  <br>  <span>// -- Foam Generation --</span><br>  <span>// Create foam by thresholding the combined wave height and fine details.</span><br>  <span>float</span> foam = <span>smoothstep</span>(<span>0.5</span>, <span>0.7</span>, combinedWaves + detail);<br>  <br>  <span>// -- Water Color and Gradient --</span><br>  <span>// Base water color: a deep blue that lightens toward the top.</span><br>  <span>vec3</span> waterColor = <span>mix</span>(<span>vec3</span>(<span>0.0</span>, <span>0.03</span>, <span>0.1</span>), <span>vec3</span>(<span>0.0</span>, <span>0.1</span>, <span>0.3</span>), uv.y + <span>0.5</span>);<br>  <span>// Foam color: bright, frothy white-blue.</span><br>  <span>vec3</span> foamColor = <span>vec3</span>(<span>0.9</span>, <span>0.9</span>, <span>1.0</span>);<br>  <span>// Mix water and foam colors based on foam intensity.</span><br>  <span>vec3</span> color = <span>mix</span>(waterColor, foamColor, foam);<br>  <br>  <span>// -- Specular Highlights --</span><br>  <span>// Enhance the wave crests with subtle highlights.</span><br>  <span>float</span> specular = <span>smoothstep</span>(<span>0.6</span>, <span>0.8</span>, combinedWaves);<br>  color += specular * <span>vec3</span>(<span>0.3</span>, <span>0.3</span>, <span>0.35</span>);<br>  <br>  <span>// -- Dramatic Lightning Flashes --</span><br>  <span>// Generate a random pulse value. Occasionally, when the value is very high,</span><br>  <span>// we simulate a lightning flash by blending the scene toward white.</span><br>  <span>float</span> lightningPulse = <span>fract</span>(<span>sin</span>(time * <span>20.0</span>) * <span>43758.5453123</span>);<br>  <span>float</span> lightning = <span>smoothstep</span>(<span>0.98</span>, <span>1.0</span>, lightningPulse);<br>  color = <span>mix</span>(color, <span>vec3</span>(<span>1.0</span>), lightning * <span>0.8</span>);<br>  <br>  <span>// -- Additional High-Frequency Variation --</span><br>  <span>// Introduce extra subtle rippling from high-frequency noise to mimic tiny droplets and disturbances.</span><br>  <span>float</span> smallRipples = fbm(uvRipple * <span>50.0</span> + time * <span>5.0</span>);<br>  color *= <span>mix</span>(<span>0.9</span>, <span>1.1</span>, smallRipples);<br>  <br>  <span>// -- Gamma Correction --</span><br>  color = <span>pow</span>(color, <span>vec3</span>(<span>0.4545</span>));<br>  <br>  <span>gl_FragColor</span> = <span>vec4</span>(color, <span>1.0</span>);<br>}<br></code></pre><h2><span>常见问题</span></h2><p>如果未明确 AI 使用某种编程语言实现功能，它一般会首选 Python 作为实现语言，JavaScript 也是 AI 常用语言（主要得益于丰富的 NPM 生态）。所以这里推荐在操作系统中预安装 <span>Python<sup>[13]</sup></span> 或 <span>Node.js<sup>[14]</sup></span> 环境，方便执行 AI 生成的代码片段。</p><ul><li><p><span>uv<sup>[15]</sup></span>：是一款超高速的 Python 包和项目管理器，由 Rust 编写，可替代 pip、pip-tools、pipx、poetry 等多个工具，速度比 pip 快 10-100 倍。它支持 Python 版本管理、应用安装、脚本运行，并提供高效的项目管理功能，包括通用锁定文件和 Cargo 风格的工作区。uv 兼容 pip 接口，节省磁盘空间，并可直接通过 curl 或 pip 安装，无需预装 Rust 或 Python，适用于 macOS、Linux 和 Windows。</p></li><li><p><span>nvm<sup>[16]</sup></span>：Node.js 版本管理工具，替代品有 <span>fnm<sup>[17]</sup></span>，由 Rust 编写。</p></li></ul><p>uv 和 nvm 可根据需要选择性安装，它们只是帮你优雅管理项目的工具，并不是代码执行的必须品。在案例贪吃蛇中，ChatGPT 给出的代码为 Python，以下给出了运行步骤以供参考：</p><h3><span>创建虚拟环境</span></h3><p>使用 uv 来创建一个 Python 虚拟环境（隔离项目依赖，避免不同项目之间的冲突）：</p><pre><code><span># 3.11 为 python 版本，可根据需要自行切换</span><br>uv venv --python 3.11<br></code></pre><h3><span>激活虚拟环境</span></h3><pre><code><span>source</span> .venv/bin/activate<br></code></pre><h3><span>安装依赖</span></h3><pre><code>uv pip install pygame<br></code></pre><p><span>pygame<sup>[18]</sup></span>：是一组专为游戏开发设计的 Python 模块，构建于优秀的 SDL（<span>Simple DirectMedia Layer<sup>[19]</sup></span>）库之上。这使得开发者可以使用 Python 语言创建功能完备的游戏和多媒体程序。Pygame 高度可移植，可在几乎所有平台和操作系统上运行。</p><h3><span>运行脚本</span></h3><pre><code>python snake.py<br></code></pre><h1><span>附录</span></h1><h2><span>价格：DeepSeek vs OpenAI</span></h2><p><strong>OpenAI o</strong>* 系列模型价格高于 DeepSeek，如果想使用最具性价比的 API，DeepSeek 仍是不错选择。o3-mini 在保持与 o1 类似推理质量的情况下，价格远低于 o1。如果你的应用正在使用 o1 模型做推理任务，则可以考虑切换至 o3 系列了。</p><p><img data-backh="452" data-backw="578" data-imgfileid="100005891" data-ratio="0.7814814814814814" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrdxv0HMdsb1SS2NUdO0PTWFlVDK38ianBI8cicUqHz6FZh07iaqHb5lpyg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrdxv0HMdsb1SS2NUdO0PTWFlVDK38ianBI8cicUqHz6FZh07iaqHb5lpyg/640?wx_fmt=png&amp;from=appmsg"></p><p><img data-backh="898" data-backw="578" data-imgfileid="100005892" data-ratio="1.5537037037037038" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrwcSBpJNrn3JsmMAHcoSeGjPdiaP7KCpobzXLKQrAZ5SaBCiafpoNOdMQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/90Kxd0FAJJfoHquHicBJSVWfUTPkRwiahrwcSBpJNrn3JsmMAHcoSeGjPdiaP7KCpobzXLKQrAZ5SaBCiafpoNOdMQ/640?wx_fmt=png&amp;from=appmsg"></p><h3>References</h3><section><span><span>[1]</span><p><strong>GitHub Copilot:</strong> <em>https://github.com/features/copilot</em></p></span><span><span>[2]</span><p><strong>Cursor:</strong> <em>https://www.cursor.com</em></p></span><span><span>[3]</span><p><strong>Windsurf:</strong> <em>https://codeium.com</em></p></span><span><span>[4]</span><p><strong>Trae:</strong> <em>https://www.trae.ai</em></p></span><span><span>[5]</span><p><strong>v0:</strong> <em>https://v0.dev</em></p></span><span><span>[6]</span><p><strong>bolt.new:</strong> <em>https://bolt.new</em></p></span><span><span>[7]</span><p><strong>Replit AI:</strong> <em>https://replit.com/ai</em></p></span><span><span>[8]</span><p><strong>o3-mini:</strong> <em>https://openai.com/index/openai-o3-mini</em></p></span><span><span>[9]</span><p><strong>Function calling:</strong> <em>https://platform.openai.com/docs/guides/function-calling</em></p></span><span><span>[10]</span><p><strong>Structured Outputs:</strong> <em>https://platform.openai.com/docs/guides/structured-outputs</em></p></span><span><span>[11]</span><p><strong>Developer Messages:</strong> <em>https://platform.openai.com/docs/guides/text-generation#building-prompts</em></p></span><span><span>[12]</span><p><strong>deliberative alignment:</strong> <em>https://openai.com/index/deliberative-alignment</em></p></span><span><span>[13]</span><p><strong>Python:</strong> <em>https://python.org</em></p></span><span><span>[14]</span><p><strong>Node.js:</strong> <em>https://nodejs.org</em></p></span><span><span>[15]</span><p><strong>uv:</strong> <em>https://github.com/astral-sh/uv</em></p></span><span><span>[16]</span><p><strong>nvm:</strong> <em>https://github.com/nvm-sh/nvm</em></p></span><span><span>[17]</span><p><strong>fnm:</strong> <em>https://github.com/Schniz/fnm</em></p></span><span><span>[18]</span><p><strong>pygame:</strong> <em>https://github.com/pygame/pygame</em></p></span><span><span>[19]</span><p><strong>Simple DirectMedia Layer:</strong> <em>https://www.libsdl.org</em></p></span></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/uQxLOIEiNQZeJTKYO0wAxQ",target="_blank" rel="noopener noreferrer">原文链接</a>
