---
title: "DockerHub 国内镜像解决方案"
date: 2024-06-22T01:06:52Z
draft: ["false"]
tags: [
  "fetched",
  "老胡的储物柜"
]
categories: ["Duty"]
---
DockerHub 国内镜像解决方案 by 老胡的储物柜
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><p data-tool="mdnice编辑器">目前 <code>DockerHub</code> 仓库镜像服务基本都下线了， <code>Docker</code> 可以说是开发人员的必备工具，这个影响还是很大的。对老胡来说，不论是从个人还是技术团队，如何配置 <code>DockerHub</code> 镜像加速是个急需解决的问题。</p><p data-tool="mdnice编辑器">经过调研探索，老胡总结了以下方案：</p><ul data-tool="mdnice编辑器"><li><section>直接用第三方搭建好的</section></li><li><section>自建</section></li><ul><li><section>基于 Cloudflare Workers 镜像代理</section></li><li><section>基于 Github Action 转存同步</section></li><li><section>[推荐]购买服务器</section></li><li><section>利用免费平台</section></li></ul></ul><blockquote data-tool="mdnice编辑器"><p>有更好的方案欢迎留言分享</p></blockquote><h2 data-tool="mdnice编辑器"><span></span><span>第三方</span></h2><section data-tool="mdnice编辑器"><table><thead><tr><th>加速地址</th><th>说明</th></tr></thead><tbody><tr><td>https://docker.m.daocloud.io</td><td>DaoCloud 驱动</td></tr><tr><td>https://dockerpull.com</td><td>Docker Proxy  驱动</td></tr><tr><td>https://atomhub.openatom.cn</td><td>AtomHub 提供，仅有基础镜像</td></tr><tr><td>https://docker.1panel.live</td><td>1panel  驱动</td></tr><tr><td>https://dockerhub.jobcher.com</td><td>打工人日报驱动</td></tr><tr><td>https://hub.rat.dev</td><td>耗子面板驱动</td></tr><tr><td>https://docker.registry.cyou</td><td>bestcfipas 驱动</td></tr><tr><td>https://docker.awsl9527.cn</td><td>zeruns 驱动</td></tr><tr><td>https://do.nark.eu.org/</td><td>/</td></tr><tr><td>https://docker.ckyl.me</td><td>/</td></tr><tr><td>https://hub.uuuadc.top</td><td>/</td></tr><tr><td>https://docker.chenby.cn</td><td>/</td></tr><tr><td>https://docker.ckyl.me</td><td>/</td></tr></tbody></table></section><p data-tool="mdnice编辑器">以上排名不分先后，为了后续维护方便，老胡弄了个页面维护免费可用的 Docker 镜像代理域名列表👉 https://www.fre321.com/p/docker_proxy_list。</p><h2 data-tool="mdnice编辑器"><span></span><span>自建</span></h2><h3 data-tool="mdnice编辑器"><span></span><span>基于 VPS</span><span></span></h3><p data-tool="mdnice编辑器">购买一台海外 VPS 和域名，通过开源项目自建，老胡认为这是最<strong>稳妥</strong>的方案，这块的开源项目有很多，老胡都试了下，最终选用的是 dqzboy/Docker-Proxy，安装也很简单：</p><pre data-tool="mdnice编辑器"><code>bash -c "$(curl -fsSL https://raw.githubusercontent.com/dqzboy/Docker-Proxy/main/install/DockerProxy_Install.sh)"<br></code></pre><p data-tool="mdnice编辑器">执行跟着配置走就搞定了。</p><h3 data-tool="mdnice编辑器"><span></span><span>基于平台</span><span></span></h3><p data-tool="mdnice编辑器">基于 CF 搭建的话推荐：CF-Workers-docker.io，部署方式支持 <code>Workers</code> 和 <code>Pages</code>，教程在 README 中，讲得也很清楚。</p><p data-tool="mdnice编辑器">使用 <code>Github Action</code> 推荐 tech-shrimp/docker_image_pusher</p><ul data-tool="mdnice编辑器"><li><section>支持DockerHub, gcr.io, k8s.io, ghcr.io等任意仓库</section></li><li><section>支持最大40GB的大型镜像</section></li><li><section>使用阿里云的官方线路，速度快</section></li></ul><h2 data-tool="mdnice编辑器"><span></span><span>使用</span></h2><p data-tool="mdnice编辑器">不论是用第三方还是自建，使用基本都是类似的：</p><pre data-tool="mdnice编辑器"><code><span>#</span><span> 通过域名使用</span><br><span>#</span><span> 说明：library是一个特殊的命名空间，它代表的是官方镜像。如果是某个用户的镜像就把library替换为镜像的用户名</span><br>docker pull {domain}/library/alpine:latest<br><span><br>#</span><span> 设置 registry mirror，推荐</span><br>tee /etc/docker/daemon.json &lt;&lt;EOF<br>{<br>    "registry-mirrors": ["https://xxx.xxx"]<br>}<br>EOF<br><span>#</span><span> 在里面填上代理域名即可，可以多个</span><br>systemctl daemon-reload<br>systemctl restart docker<br></code></pre></section><section><mp-common-profile data-pluginname="mpprofile" data-id="MzU4MTA0NDQ0Ng==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/YRBRJvZXcIXRN22CZKL79AIdgD0dURDpRdEcCAyVqaIszWvibrr0qJ59XRMPXV2tibHa7CoVt5zuHlaYxiajNgEFg/0?wx_fmt=png" data-nickname="老胡的储物柜" data-alias="howie_locker" data-signature="编程、兴趣、生活" data-from="0" data-is_biz_ban="0"></mp-common-profile></section><p><br></p><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/iZJ8FSJFiFAWdVxKuY_Cqw",target="_blank" rel="noopener noreferrer">原文链接</a>
