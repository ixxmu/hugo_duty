---
title: "微调篇「数据集构建」保姆级教程来了！"
date: 2025-03-28T00:07:34Z
draft: ["false"]
tags: [
  "fetched",
  "Datawhale"
]
categories: ["Duty"]
---
微调篇「数据集构建」保姆级教程来了！ by Datawhale
------
<div><section data-mpa-powered-by="yiban.io" data-pm-slice="0 0 []"><section powered-by="xiumi.us"><section><section powered-by="xiumi.us"><section><section data-id="85660" data-custom="rgb(117, 117, 118)" data-color="rgb(117, 117, 118)"><section><p><span><span leaf=""> Datawhale干货 </span></span></p><section data-style="white-space: normal; text-align: left;font-size: 14px;line-height: 1.5em; color: rgb(12, 12, 12);"><p><span><strong><span leaf="">作者：吴锦凤，Datawhale优秀学习者</span></strong></span></p></section></section></section></section><section nodeleaf="" data-action-id="m8ricnrwvmu"><mp-common-profile data-pluginname="mpprofile" data-nickname="Datawhale" data-alias="Datawhale" data-index="0" data-from="2" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/vI9nYe94fsEXsBwQkpYLtE2vhn7Z3RVOSRu5M1VicIgqgMRKLsxsibK7OUSqUb1rUO4pfXnQyFYKqhryAIeh4MOg/300?wx_fmt=png&amp;wxfrom=19" data-signature="一个专注于AI领域的开源组织，汇聚了众多优秀学习者，使命-for the learner，和学习者一起成长。" data-id="MzIyNjM2MzQyNg==" data-is_biz_ban="0" data-origin_num="737" data-biz_account_status="0"></mp-common-profile></section></section></section></section></section><blockquote><p><span leaf="">封面来源：code秘密花园</span></p></blockquote><h1 data-mpa-action-id="m8rie7nnqn2" data-pm-slice="0 0 []"><span mpa-font-style="m8rie7ndm4x"><span leaf="">前</span><span leaf="">篇：<a href="https://mp.weixin.qq.com/s?__biz=MzIyNjM2MzQyNg==&amp;mid=2247701892&amp;idx=1&amp;sn=c324f7689c7e5c9d8cf320f2b65e772a&amp;scene=21#wechat_redirect" textvalue="零基础入门：DeepSeek微调教程来了！" data-itemshowtype="0" target="_blank" linktype="text" data-linktype="2">零基础入门：DeepSeek微调教程来了！</a></span></span></h1><h1 data-mpa-action-id="m8rie7nnqn2" data-pm-slice="0 0 []"><span mpa-font-style="m8rie7ndm4x"><span leaf=""><span textstyle="">这次是「数据集构建」保姆级教程第一篇，会持续更新。</span></span></span></h1><h1><span><span leaf="">一、开源数据网站下载</span></span></h1><p><span mpa-font-style="m8ricnqxw87"><span leaf="">Kaggle: </span></span><span mpa-font-style="m8ricnqx156o"><span leaf="">https://www.kaggle.com/</span></span></p><p><span mpa-font-style="m8ricnqx1qm9"><span leaf="">ModelScope: </span></span><span mpa-font-style="m8ricnqx1nec"><span leaf="">https://modelscope.cn/datasets</span></span></p><p><span mpa-font-style="m8ricnqx1reg"><span leaf="">hugging face：</span></span><span mpa-font-style="m8ricnqx1gwr"><span leaf="">https://huggingface.co</span></span></p><p><span mpa-font-style="m8ricnqx246p"><span leaf="">百度飞桨：</span></span><span mpa-font-style="m8ricnqxy6l"><span leaf="">https://aistudio.baidu.com/datasetoverview</span></span></p><h1><span><span leaf="">二、构建数据集（大致步骤说明）</span></span></h1><h3><span><span leaf="">1. </span></span><span><span leaf="">明确目标</span></span></h3><ul><li><span><span leaf="">定义问题</span></span><span><span leaf="">：确定你要解决的问题或任务。（比如，你需要构建医疗领域的数据集，那么你应该搜索相关医疗的资料~有的时候问题不是很明确，这个时候就需要实际探究本质上你需要什么。）</span></span></li><li><span><span leaf="">确定数据类型</span></span><span><span leaf="">：明确需要的数据类型（文本、图像、音频等）。</span></span></li></ul><p><span><span leaf="">（ps:强调！！！以及非常需要关注构建的数据集是否符合你要后训练模型的数据格式~）</span></span></p><h3><span><span leaf="">2. </span></span><span><span leaf="">数据收集（这一步就是收集所有你能收集到的相关的数据）</span></span></h3><ul><li><span><span leaf="">内部数据</span></span><span><span leaf="">：从现有数据库、日志等获取数据。</span></span><span><span leaf="">【如果有条件】</span></span></li><li><span><span leaf="">外部数据</span></span><span><span leaf="">：通过公开数据集、相关网站配合ai抽取等方式获取。</span></span></li><li><span><span leaf="">数据生成</span></span><span><span leaf="">：如有必要，可通过模拟或合成数据。</span></span><span><span leaf="">【非必须】</span></span></li></ul><h3><span><span leaf="">3. </span></span><span><span leaf="">数据标注</span></span></h3><ul><li><span><span leaf="">手动标注</span></span><span><span leaf="">：人工标注数据。</span></span></li><li><span><span leaf="">自动标注</span></span><span><span leaf="">：使用工具或预训练模型进行标注。</span></span></li></ul><h3><span><span leaf="">4. </span></span><span><span leaf="">数据清洗</span></span></h3><ul><li><span><span leaf="">处理缺失值</span></span><span><span leaf="">：填充或删除缺失数据。</span></span></li><li><span><span leaf="">去重</span></span><span><span leaf="">：删除重复数据。</span></span></li><li><span><span leaf="">格式统一</span></span><span><span leaf="">：确保数据格式一致。</span></span></li><li><span><span leaf="">异常值处理</span></span><span><span leaf="">：识别并处理异常值。</span></span></li></ul><section><section><p><span><span leaf="">大批量数据</span></span><span><span leaf="">处理步骤</span></span><span><span leaf=""> 第一步：依托传统大数据平台（如 Hive、HBase、Flink、</span></span><span><span leaf="">MySQL</span></span><span><span leaf=""> 等），对数据进行初步清洗，剔除明显错误或异常的数据。 第二步：借助人工智能技术，对数据中的错别字、语法错误、逻辑问题等进行智能修复，并结合标准数据集进行校准，提升数据质量与准确性。 第三步：开展人工终审，通过随机抽查的方式，对经过前两级处理的数据进行最终审核，确保数据的完整性和可靠性。</span></span></p></section></section><h3><span><span leaf="">5. </span></span><span><span leaf="">数据增强【非必须，具体看情况调节】</span></span></h3><ul><li><span><span leaf="">图像</span></span><span><span leaf="">：旋转、裁剪等。</span></span></li></ul><p><span><span leaf="">（1）旋转</span></span></p><p><span></span><span><span leaf="">细节</span></span><span><span leaf="">：旋转角度通常在一定范围内随机选择，如±30°或±45°，以模拟不同视角的图像。</span></span></p><p><span></span><span><span leaf="">操作步骤</span></span><span><span leaf="">：使用图像处理库（如OpenCV或Albumentations）对图像进行旋转操作。如果图像有标注框（如目标检测任务），标注框也需要同步旋转。</span></span></p><section><span><span><span></span><span></span><span></span></span></span><pre><code><span><span leaf="">import</span></span><span leaf=""> albumentations </span><span><span leaf="">as</span></span><span leaf=""> A</span><span leaf=""><br></span><span leaf="">transform = A.RandomRotate90(p=</span><span><span leaf="">0.5</span></span><span leaf="">)  </span><span><span leaf=""># 随机旋转90度</span></span><span leaf=""><br></span><span leaf="">augmented_image = transform(image=image)[</span><span><span leaf="">'image'</span></span><span leaf="">]</span></code></pre></section><p><span><span leaf="">（2）裁剪</span></span></p><p><span></span><span><span leaf="">细节</span></span><span><span leaf="">：随机裁剪图像的一部分，裁剪区域可以是固定大小或随机大小。裁剪时需要注意保留关键信息。</span></span></p><p><span></span><span><span leaf="">操作步骤</span></span><span><span leaf="">：使用随机裁剪函数，如Albumentations的</span></span><span><span leaf="">RandomCrop</span></span><span><span leaf="">。</span></span></p><section><span><span><span></span><span></span><span></span></span></span><pre><code><span leaf="">transform = A.RandomCrop(width=</span><span><span leaf="">400</span></span><span leaf="">, height=</span><span><span leaf="">400</span></span><span leaf="">, p=</span><span><span leaf="">0.3</span></span><span leaf="">)</span><span leaf=""><br></span><span leaf="">augmented_image = transform(image=image)[</span><span><span leaf="">'image'</span></span><span leaf="">]</span></code></pre></section><p><span><span leaf="">（3）其他增强</span></span></p><p><span></span><span><span leaf="">亮度调整</span></span><span><span leaf="">：通过调整图像的亮度来模拟不同光照条件。</span></span></p><p><span></span><span><span leaf="">噪声添加</span></span><span><span leaf="">：向图像添加随机噪声，增强模型的鲁棒性。</span></span></p><section><span><span><span></span><span></span><span></span></span></span><pre><code><span leaf="">transform = A.Compose([</span><span leaf=""><br></span><span leaf="">    A.RandomBrightnessContrast(p=</span><span><span leaf="">0.3</span></span><span leaf="">),</span><span leaf=""><br></span><span leaf="">    A.GaussianBlur(blur_limit=</span><span><span leaf="">3</span></span><span leaf="">, p=</span><span><span leaf="">0.2</span></span><span leaf="">)</span><span leaf=""><br></span><span leaf="">])</span><span leaf=""><br></span><span leaf="">augmented_image = transform(image=image)[</span><span><span leaf="">'image'</span></span><span leaf="">]</span></code></pre></section><ul><li><span><span leaf="">文本</span></span><span><span leaf="">：同义词替换、回译等。（即增加噪声数据）</span></span></li></ul><p><span><span leaf="">（1）同义词替换</span></span></p><p><span></span><span><span leaf="">细节</span></span><span><span leaf="">：在句子中随机选择一些词语，用它们的同义词替换。注意替换后的句子语义应保持一致。</span></span></p><p><span></span><span><span leaf="">操作步骤</span></span><span><span leaf="">：使用词典或词嵌入模型（如Word2Vec）找到同义词并替换</span></span></p><p><span><span leaf="">（2）回译（就是英翻中，中翻英，意......无限套娃中ing）</span></span></p><section><p><span><span leaf="">细节</span></span><span><span leaf="">：将文本翻译成一种语言，再翻译回原语言，可能会引入一些语义变化。</span></span></p><p><span><span leaf="">操作步骤</span></span><span><span leaf="">：使用机器翻译API（如Google Translate）进行翻译。</span></span></p></section><ul><li><span><span leaf="">音频</span></span><span><span leaf="">：变速、加噪声等。</span></span></li></ul><p><span><span leaf="">（1）</span></span><span><span leaf="">变速</span></span></p><section><p><span></span><span><span leaf="">细节</span></span><span><span leaf="">：调整音频的播放速度，但保持音调不变。</span></span></p><p><span></span><span><span leaf="">操作步骤</span></span><span><span leaf="">：使用音频处理库（如librosa）对音频进行变速处理。</span></span></p></section><p><span><span leaf="">（2）</span></span><span><span leaf="">加噪声</span></span></p><section><p><span></span><span><span leaf="">细节</span></span><span><span leaf="">：向音频中添加背景噪声，增强模型对噪声的鲁棒性。</span></span></p><p><span></span><span><span leaf="">操作步骤</span></span><span><span leaf="">：从噪声库中选择噪声并叠加到音频上。</span></span></p></section><h4><span><span leaf="">为什么添加噪声？（补充内容）</span></span></h4><p><span><span leaf="">在数据集中添加噪声的主要目的是增强模型的鲁棒性。具体原因包括：</span></span></p><ol><li><section><span leaf="">1. </span><span><span leaf="">模拟真实场景</span></span><span><span leaf="">：真实世界中的图像通常包含噪声（如传感器噪声、压缩噪声等）。通过在训练数据中添加噪声，模型能够更好地适应实际应用中的噪声环境。</span></span></section></li><li><section><span leaf="">2. </span><span><span leaf="">防止过拟合</span></span><span><span leaf="">：噪声可以作为一种正则化手段，防止模型过度依赖训练数据中的特定特征，从而提高泛化能力。</span></span></section></li><li><section><span leaf="">3. </span><span><span leaf="">数据增强</span></span><span><span leaf="">：噪声添加是数据增强的一种方式，能够增加数据的多样性，帮助模型学习更广泛的特征。</span></span></section></li></ol><section><span><span><span leaf="">🍰</span></span></span><section><h4><span><span leaf="">判断是否需要增加噪声</span></span></h4><h5><span><span leaf="">不需要添加噪声数据集的情况</span></span></h5><ul><li><span><span leaf="">数据质量高且任务明确</span></span><span><span leaf="">：如果原始数据集已经足够丰富、多样且高质量，能够很好地覆盖模型需要学习的模式和特征，那么通常不需要额外添加噪声数据。</span></span></li><li><span><span leaf="">模型过拟合风险低</span></span><span><span leaf="">：当数据集规模较大、数据分布均匀且模型架构相对简单时，模型过拟合的风险较低，此时也不需要通过添加噪声数据来增强模型的泛化能力。</span></span></li></ul><h5><span><span leaf="">需要添加噪声数据集的情况</span></span></h5><ul><li><span><span leaf="">过拟合问题严重</span></span><span><span leaf="">：当模型在训练集上表现优异，但在验证集或测试集上表现显著下降时，说明模型可能过拟合了训练数据中的噪声和特定模式。此时可以通过添加噪声数据来增强模型的鲁棒性。</span></span></li><li><span><span leaf="">特定任务需求</span></span><span><span leaf="">：在一些特定的任务中，如图像生成或语音识别，添加噪声数据可以帮助模型学习到更复杂的模式和特征，从而提升模型在实际应用中的表现。</span></span></li></ul></section></section><h4><span><span leaf="">数据集构建中的注意事项</span></span></h4><ol><li><section><span leaf="">1. </span><span><span leaf="">平衡噪声与原始数据</span></span><span><span leaf="">：</span></span></section></li></ol><ul><li><span><span leaf="">在数据集中，噪声图像应与原始图像保持一定的比例，避免噪声数据过多导致模型过度依赖噪声特征。</span></span></li></ul><li><section><span leaf="">2. </span><span><span leaf="">多样性</span></span><span><span leaf="">：</span></span></section></li><ul><li><span><span leaf="">在添加噪声时，确保噪声类型和强度的多样性，以覆盖更多的实际场景。</span></span></li></ul><li><section><span leaf="">3. </span><span><span leaf="">验证集和测试集</span></span><span><span leaf="">：</span></span></section></li><ul><li><span><span leaf="">在验证集和测试集中也应包含适量的噪声数据，以评估模型在噪声环境下的表现。</span></span></li></ul><li><section><span leaf="">4. </span><span><span leaf="">数据增强的组合</span></span><span><span leaf="">：</span></span></section></li><ul><li><span><span leaf="">噪声添加可以与其他数据增强技术（如旋转、缩放、翻转等）结合使用，进一步提升模型的鲁棒性。</span></span></li></ul><h3><span><span leaf="">6. </span></span><span><span leaf="">数据划分</span></span></h3><ul><li><span><span leaf="">训练集</span></span><span><span leaf="">：用于模型训练。</span></span></li><li><span><span leaf="">验证集</span></span><span><span leaf="">：用于调参和模型选择。</span></span></li><li><span><span leaf="">测试集</span></span><span><span leaf="">：用于最终评估。</span></span></li></ul><h1><span><span leaf="">三、具体示例（以DeepSeek-R1蒸馏模型为微调模型，构建的医学数据集为例）</span></span></h1><h2><span><span leaf="">1.明确目标——医生文本类数据集构建</span></span></h2><ol><li><section><span leaf="">1. </span><span><span leaf="">我需要让微调后的模型可以更擅长完成提供诊疗建议，为了增强可行度，它的口吻最好要更像是一位医生</span></span></section></li><li><section><span leaf="">2. </span><span><span leaf="">确定我要收集的数据类型是文本类，所以我应该搜集更多与医疗相关的文本，最后能找到直接就是模拟医生的文本，在此基础上进行扩展加强！</span></span></section></li><li><section><span leaf="">3. </span><span><span leaf="">DeepSeek-R1蒸馏模型所需要的数据格式是：Question-Complex-CoT-Response。所以之后，在构建数据集的过程中我得注意到，一定要构建Complex-CoT。</span></span></section></li></ol><h2><span><span leaf="">2.数据收集</span></span></h2><p><span><span leaf="">1.判断医学领域应该会有很多之前已经构建过的数据集，所以我先去开源网站modelscope进行寻找~</span></span></p><section nodeleaf=""><img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/vI9nYe94fsFeplTPt6It1iaJd8ibic8LJXQvlB2S5zrHfdF2PuIWGVXKESCNBT3vqX8MBrrEg7fqeZE0x9ibTFFveg/640?wx_fmt=png&amp;from=appmsg" alt="Image" data-ratio="0.1391035548686244" data-type="png" data-w="1294" data-imgfileid="100220107" src="https://mmbiz.qpic.cn/sz_mmbiz_png/vI9nYe94fsFeplTPt6It1iaJd8ibic8LJXQvlB2S5zrHfdF2PuIWGVXKESCNBT3vqX8MBrrEg7fqeZE0x9ibTFFveg/640?wx_fmt=png&amp;from=appmsg"></section><p><span><span leaf="">2.通过优质的开源数据集确认规范，尽可能在后续的构建过程中，倾向于构建类似优质开源数据集的方向。</span></span></p><p><span><span leaf="">3.各大公开网站的医学资料收集~此处，笔者收集的是中华医学期刊网等等网站上公开的论文与指南【保存链接或者是下载】</span></span></p><h2><span><span leaf="">3.数据标注</span></span></h2><p><span><span leaf="">1.（1）利用一些数据标注辅助平台，帮助构建数据集。将抽取的文件，放入平台进行构建基础QA问答对。</span></span></p><section nodeleaf=""><img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/vI9nYe94fsFeplTPt6It1iaJd8ibic8LJXQzjT8z6cOTE3AnQNTyxxv7cPAXHQA77ibgpo3ibVdeoPN6lKgG8ia2WkOg/640?wx_fmt=png&amp;from=appmsg" alt="Image" data-ratio="0.4621026894865526" data-type="png" data-w="2454" data-imgfileid="100220110" src="https://mmbiz.qpic.cn/sz_mmbiz_png/vI9nYe94fsFeplTPt6It1iaJd8ibic8LJXQzjT8z6cOTE3AnQNTyxxv7cPAXHQA77ibgpo3ibVdeoPN6lKgG8ia2WkOg/640?wx_fmt=png&amp;from=appmsg"></section><p><span><span leaf="">（2）将构建的问答对放入大模型AI，让它帮忙补全，Complex_CoT的部分。[问答对也可以是自己简单想的一些问答，根据自己的需求，通过提示词让大模型AI达到我们想要的效果。]</span></span></p><section nodeleaf=""><img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/vI9nYe94fsFeplTPt6It1iaJd8ibic8LJXQicYrTib2uCcee4iarwbdbEONAibhMzQAo33e6jpjBFj9UxzPgETtmJdYGg/640?wx_fmt=png&amp;from=appmsg" alt="Image" data-ratio="0.38352524357838796" data-type="png" data-w="1129" data-imgfileid="100220108" src="https://mmbiz.qpic.cn/sz_mmbiz_png/vI9nYe94fsFeplTPt6It1iaJd8ibic8LJXQicYrTib2uCcee4iarwbdbEONAibhMzQAo33e6jpjBFj9UxzPgETtmJdYGg/640?wx_fmt=png&amp;from=appmsg"></section><section><span><span><span></span><span></span><span></span></span></span><pre><code><span leaf="">[</span><span leaf=""><br></span><span leaf="">    </span><span leaf="">{</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"Question"</span></span><span leaf="">:</span><span><span leaf="">"医生，我患有强直性脊柱炎（SpA），还伴有其他疾病，如果用生物制剂治疗，我需要注意些什么？"</span></span><span leaf="">,</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"Complex-CoT"</span></span><span leaf="">:</span><span><span leaf="">"对于伴有合并症的SpA患者，生物制剂的选择需要综合考虑患者的整体健康状况、合并症的种类和严重程度，以及生物制剂的潜在副作用。不同种类的生物制剂作用机制不同，可能对合并症产生不同的影响。因此，需要在专业医生的指导下，谨慎选择适合患者的生物制剂，并密切监测治疗过程中的反应。"</span></span><span leaf="">,</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"Response"</span></span><span leaf="">:</span><span><span leaf="">"针对伴有合并症的SpA患者，选用不同种类的生物制剂应慎重。我们需要综合评估你的整体健康状况，包括合并症的种类和严重程度，同时考虑生物制剂的潜在副作用。不同生物制剂的作用机制不同，可能会对合并症产生不同的影响。因此，在选择生物制剂时，我们会根据你的具体情况，权衡利弊，选择最适合你的治疗方案，并在治疗过程中密切监测你的反应。"</span></span><span leaf=""><br></span><span leaf="">    </span><span leaf="">}</span><span leaf="">,</span><span leaf=""><br></span><span leaf="">    </span><span leaf="">{</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"Question"</span></span><span leaf="">:</span><span><span leaf="">"医生，目前对于强直性脊柱炎（SpA）的研究进展如何？"</span></span><span leaf="">,</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"Complex-CoT"</span></span><span leaf="">:</span><span><span leaf="">"尽管目前在强直性脊柱炎（SpA）的研究中已经取得了一些成果，例如对疾病机制的初步了解、新的诊断方法和治疗方法的探索等，但仍然存在许多未解之谜。例如，SpA的发病机制尚未完全明确，部分患者对现有治疗的反应不佳，且疾病的长期预后仍需进一步研究。因此，SpA的研究仍在不断深入中。"</span></span><span leaf="">,</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"Response"</span></span><span leaf="">:</span><span><span leaf="">"尽管目前已有诸多研究成果，但SpA仍存在许多未解之谜。虽然我们在疾病机制、诊断方法和治疗手段上取得了一些进展，但仍然有许多问题需要进一步研究。例如，SpA的发病机制尚未完全明确，部分患者对现有治疗的反应不佳，且疾病的长期预后仍需深入探索。所以，SpA的研究仍在不断进行中，以期为患者提供更好的帮助。"</span></span><span leaf=""><br></span><span leaf="">    </span><span leaf="">}</span><span leaf="">,</span><span leaf=""><br></span><span leaf="">    </span><span leaf="">{</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"Question"</span></span><span leaf="">:</span><span><span leaf="">"医生，未来的研究应该如何开展，才能更好地提高强直性脊柱炎（SpA）患者的生活质量呢？"</span></span><span leaf="">,</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"Complex-CoT"</span></span><span leaf="">:</span><span><span leaf="">"未来的研究应该从多个方面入手，以提高SpA患者的生活质量。首先，探索新的生物标志物可以帮助我们更早、更准确地诊断疾病，实现个体化治疗。其次，开发新的药物和治疗方法可以为患者提供更多的选择，提高治疗效果。此外，新技术的应用可以优化治疗策略，减少治疗的副作用。通过这些综合措施，我们有望进一步改善SpA患者的生活质量。"</span></span><span leaf="">,</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"Response"</span></span><span leaf="">:</span><span><span leaf="">"未来的研究应继续探索新的生物标志物、新药物和新技术的应用，以进一步提高诊断的准确性、优化治疗策略，并最终改善SpA患者的生活质量。我们会从多个方面入手，包括寻找更准确的生物标志物来实现早期诊断和个体化治疗，开发更有效的药物和治疗方法，以及利用新技术优化治疗方案，减少副作用。通过这些努力，我们希望能够为SpA患者带来更好的生活质量。"</span></span><span leaf=""><br></span><span leaf="">    </span><span leaf="">}</span><span leaf=""><br></span><span leaf="">]</span></code></pre></section><p><span><span leaf="">2.同时也可以利用收集的链接，放入大模型AI让它构建数据集。</span></span></p><section nodeleaf=""><img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/vI9nYe94fsFeplTPt6It1iaJd8ibic8LJXQ6TQWxoIIDWZs3pHUNLgrCibLCxm9bLl8iaNoDRdT8Ex8wrsqQ9sKC4RQ/640?wx_fmt=png&amp;from=appmsg" alt="Image" data-ratio="0.5909893992932862" data-type="png" data-w="1132" data-imgfileid="100220109" src="https://mmbiz.qpic.cn/sz_mmbiz_png/vI9nYe94fsFeplTPt6It1iaJd8ibic8LJXQ6TQWxoIIDWZs3pHUNLgrCibLCxm9bLl8iaNoDRdT8Ex8wrsqQ9sKC4RQ/640?wx_fmt=png&amp;from=appmsg"></section><section><span><span><span></span><span></span><span></span></span></span><pre><code><span leaf="">[</span><span leaf=""><br></span><span leaf="">    </span><span leaf="">{</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"Question"</span></span><span leaf="">:</span><span><span leaf="">"医生，我是女性，最近感觉心脏不太舒服，有点胸闷，这是心脏病发作的迹象吗？"</span></span><span leaf="">,</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"Complex-CoT"</span></span><span leaf="">:</span><span><span leaf="">"女性心脏病发作的症状可能与男性不同，往往更不典型。除了胸闷，还可能伴有其他症状如呼吸急促、恶心、出汗等。在临床实践中，对于女性患者出现心脏相关症状，需要综合考虑多种因素，包括病史、体征以及辅助检查结果，以准确判断是否为心脏病发作，并及时采取相应的治疗措施。"</span></span><span leaf="">,</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"Response"</span></span><span leaf="">:</span><span><span leaf="">"女性心脏病发作的症状可能不太典型，除了胸闷，还可能有呼吸急促、恶心、出汗等。我们需要综合你的病史、体征以及辅助检查结果来判断是否为心脏病发作。如果有这些症状，建议尽快就医，我们会根据具体情况采取相应的治疗措施。"</span></span><span leaf=""><br></span><span leaf="">    </span><span leaf="">}</span><span leaf="">,</span><span leaf=""><br></span><span leaf="">    </span><span leaf="">{</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"Question"</span></span><span leaf="">:</span><span><span leaf="">"医生，我有哮喘，最近咳嗽得很厉害，是不是病情加重了？"</span></span><span leaf="">,</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"Complex-CoT"</span></span><span leaf="">:</span><span><span leaf="">"咳嗽是哮喘的常见症状之一，但咳嗽的严重程度并不一定直接反映哮喘的整体控制情况。在临床实践中，哮喘的评估需要综合考虑多个方面，包括症状频率、急性发作次数、肺功能检查结果等。对于咳嗽症状明显的患者，需要进一步评估是否存在其他诱因或合并症，并根据具体情况调整治疗方案。"</span></span><span leaf="">,</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"Response"</span></span><span leaf="">:</span><span><span leaf="">"哮喘患者咳嗽加重不一定意味着病情加重。我们需要综合评估你的症状频率、急性发作次数以及肺功能检查结果等。如果咳嗽很厉害，建议进一步检查，看看是否存在其他诱因或合并症，我们会根据具体情况调整治疗方案。"</span></span><span leaf=""><br></span><span leaf="">    </span><span leaf="">}</span><span leaf="">,</span><span leaf=""><br></span><span leaf="">    </span><span leaf="">{</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"Question"</span></span><span leaf="">:</span><span><span leaf="">"医生，我已经被诊断为哮喘，但感觉病情控制得不太好，我需要做哪些检查来全面评估我的病情呢？"</span></span><span leaf="">,</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"Complex-CoT"</span></span><span leaf="">:</span><span><span leaf="">"全面评估哮喘病情对于制定有效的治疗方案至关重要。通常需要进行肺功能检查，包括支气管激发试验和支气管舒张试验，以评估气道反应性和可逆性。此外，还需要评估患者的症状控制情况、急性发作频率、生活质量以及是否存在合并症等。通过这些综合评估，可以更准确地判断哮喘的控制水平，并调整治疗方案。"</span></span><span leaf="">,</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"Response"</span></span><span leaf="">:</span><span><span leaf="">"为了全面评估你的哮喘病情，我们需要进行一些检查，比如肺功能检查，包括支气管激发试验和支气管舒张试验，来评估气道反应性和可逆性。同时，我们还会评估你的症状控制情况、急性发作频率、生活质量以及是否存在合并症等。这些综合评估有助于我们更准确地判断病情，调整治疗方案。"</span></span><span leaf=""><br></span><span leaf="">    </span><span leaf="">}</span><span leaf=""><br></span><span leaf="">]</span></code></pre></section><section><span><span><span leaf="">🌏</span></span></span><section><p><span><span leaf="">此处数据集构建的时候也需要考虑到所构建的模型是哪家的~比如，通义千问系列的模型更适合找通义千文帮忙构建数据集，会更有利于模型微调训练哦~</span></span></p></section></section><h2><span><span leaf="">4.数据清洗</span></span></h2><p><span><span leaf="">其实主要是数据格式确认，确保数据格式一致。在这次构建过程中，整体构建数据质量较高。</span></span></p><section><span><span><span></span><span></span><span></span></span></span><pre><code><span><span leaf="">import</span></span><span leaf=""> json</span><span leaf=""><br></span><span leaf=""><br></span><span leaf=""><br></span><span><span leaf="">def</span></span><span><span leaf="">validate_json_format</span></span><span leaf="">(</span><span leaf="">json_file_path</span><span leaf="">):</span><span leaf=""><br></span><span leaf="">    </span><span><span leaf="">"""</span><span leaf=""><br></span><span leaf="">    验证JSON文件是否符合指定格式。</span><span leaf=""><br></span><span leaf=""><br></span><span leaf="">    参数:</span><span leaf=""><br></span><span leaf="">        json_file_path (str): JSON文件的路径。</span><span leaf=""><br></span><span leaf=""><br></span><span leaf="">    返回:</span><span leaf=""><br></span><span leaf="">        bool: 如果符合格式返回True，否则返回False。</span><span leaf=""><br></span><span leaf="">    """</span></span><span leaf=""><br></span><span leaf="">    </span><span><span leaf="">try</span></span><span leaf="">:</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf=""># 打开并加载JSON文件</span></span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">with</span></span><span><span leaf="">open</span></span><span leaf="">(json_file_path, </span><span><span leaf="">'r'</span></span><span leaf="">, encoding=</span><span><span leaf="">'utf-8'</span></span><span leaf="">) </span><span><span leaf="">as</span></span><span leaf=""> file:</span><span leaf=""><br></span><span leaf="">            data = json.load(file)</span><span leaf=""><br></span><span leaf=""><br></span><span leaf="">        </span><span><span leaf=""># 验证数据是否为列表</span></span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">if</span></span><span><span leaf="">not</span></span><span><span leaf="">isinstance</span></span><span leaf="">(data, </span><span><span leaf="">list</span></span><span leaf="">):</span><span leaf=""><br></span><span leaf="">            </span><span><span leaf="">print</span></span><span leaf="">(</span><span><span leaf="">"JSON数据必须是一个列表。"</span></span><span leaf="">)</span><span leaf=""><br></span><span leaf="">            </span><span><span leaf="">return</span></span><span><span leaf="">False</span></span><span leaf=""><br></span><span leaf=""><br></span><span leaf="">        </span><span><span leaf=""># 验证每个条目</span></span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">for</span></span><span leaf=""> item </span><span><span leaf="">in</span></span><span leaf=""> data:</span><span leaf=""><br></span><span leaf="">            </span><span><span leaf=""># 检查是否包含所有必需字段</span></span><span leaf=""><br></span><span leaf="">            required_fields = [</span><span><span leaf="">"Question"</span></span><span leaf="">, </span><span><span leaf="">"Complex-CoT"</span></span><span leaf="">, </span><span><span leaf="">"Response"</span></span><span leaf="">]</span><span leaf=""><br></span><span leaf="">            </span><span><span leaf="">if</span></span><span><span leaf="">not</span></span><span><span leaf="">all</span></span><span leaf="">(field </span><span><span leaf="">in</span></span><span leaf=""> item </span><span><span leaf="">for</span></span><span leaf=""> field </span><span><span leaf="">in</span></span><span leaf=""> required_fields):</span><span leaf=""><br></span><span leaf="">                </span><span><span leaf="">print</span></span><span leaf="">(</span><span><span leaf="">f"缺少字段：</span><span><span leaf="">{required_fields}</span></span><span leaf="">"</span></span><span leaf="">)</span><span leaf=""><br></span><span leaf="">                </span><span><span leaf="">return</span></span><span><span leaf="">False</span></span><span leaf=""><br></span><span leaf=""><br></span><span leaf="">            </span><span><span leaf=""># 检查字段值是否为字符串</span></span><span leaf=""><br></span><span leaf="">            </span><span><span leaf="">for</span></span><span leaf=""> field </span><span><span leaf="">in</span></span><span leaf=""> required_fields:</span><span leaf=""><br></span><span leaf="">                </span><span><span leaf="">if</span></span><span><span leaf="">not</span></span><span><span leaf="">isinstance</span></span><span leaf="">(item[field], </span><span><span leaf="">str</span></span><span leaf="">):</span><span leaf=""><br></span><span leaf="">                    </span><span><span leaf="">print</span></span><span leaf="">(</span><span><span leaf="">f"字段'</span><span><span leaf="">{field}</span></span><span leaf="">'的值必须是字符串。"</span></span><span leaf="">)</span><span leaf=""><br></span><span leaf="">                    </span><span><span leaf="">return</span></span><span><span leaf="">False</span></span><span leaf=""><br></span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">print</span></span><span leaf="">(</span><span><span leaf="">"JSON格式验证通过！"</span></span><span leaf="">)</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">return</span></span><span><span leaf="">True</span></span><span leaf=""><br></span><span leaf=""><br></span><span leaf="">    </span><span><span leaf="">except</span></span><span leaf=""> json.JSONDecodeError:</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">print</span></span><span leaf="">(</span><span><span leaf="">"JSON文件格式错误。"</span></span><span leaf="">)</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">return</span></span><span><span leaf="">False</span></span><span leaf=""><br></span><span leaf="">    </span><span><span leaf="">except</span></span><span leaf=""> FileNotFoundError:</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">print</span></span><span leaf="">(</span><span><span leaf="">f"文件未找到：</span><span><span leaf="">{json_file_path}</span></span><span leaf="">"</span></span><span leaf="">)</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">return</span></span><span><span leaf="">False</span></span><span leaf=""><br></span><span leaf="">    </span><span><span leaf="">except</span></span><span leaf=""> Exception </span><span><span leaf="">as</span></span><span leaf=""> e:</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">print</span></span><span leaf="">(</span><span><span leaf="">f"发生错误：</span><span><span leaf="">{e}</span></span><span leaf="">"</span></span><span leaf="">)</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">return</span></span><span><span leaf="">False</span></span><span leaf=""><br></span><span leaf=""><br></span><span leaf=""><br></span><span><span leaf="">if</span></span><span leaf=""> __name__ == </span><span><span leaf="">"__main__"</span></span><span leaf="">:</span><span leaf=""><br></span><span leaf="">    </span><span><span leaf=""># 替换为你的JSON文件路径</span></span><span leaf=""><br></span><span leaf="">    json_file_path = </span><span><span leaf="">"test.json"</span></span><span leaf=""><br></span><span leaf="">    validate_json_format(json_file_path)</span></code></pre></section><p><span><span leaf="">用于判断是否是["Question", "Complex-CoT", "Response"]的形式的json文件~</span></span></p><h2><span><span leaf="">补充.测试数据集</span></span></h2><p><span><span leaf="">在寻找优质数据集时，建议先抽取约1000条数据进行初步测试微调，以评估其效果是否符合需求。如果微调后的结果令人满意，再考虑将该数据集作为构建标准数据集的参考依据。</span></span></p><p><span><span leaf="">在后续构建自己的额外数据集时，应遵循循序渐进的原则。先构建少量数据并进行微调测试，观察效果。只有在确认效果达到预期后，才继续扩充数据集规模。</span></span></p><p><span><span leaf="">最后，将所有收集到的数据集整合在一起。在进行混合微调之前，先用其中的一部分数据进行测试微调。如果效果良好，则可以继续进行微调；若发现问题，则需要缩小数据集范围，仔细筛选可信数据，尽量避免脏数据对微调过程造成不良影响。</span></span></p><h1><span><span leaf="">四、完结感言</span></span></h1><p><span><span leaf="">非常感谢Deepseek官网满血版以及kimi在本章的代码修改、资料收集以及文章润色方面提供的宝贵帮助！</span></span></p><p><span><span leaf="">这是本系列的第一篇，中间还有很多需要完善的地方，我们非常期待各位小伙伴的宝贵建议和指正，让我们共同进步，一起在AI学习的道路上探索更多乐趣！</span></span></p><p><span leaf="" data-pm-slice="0 0 []"><img data-src="https://mmbiz.qpic.cn/mmbiz_png/vI9nYe94fsGxu3P5YibTO899okS0X9WaLmQCtia4U8Eu1xWCz9t8Qtq9PH6T1bTcxibiaCIkGzAxpeRkRFYqibVmwSw/640?wx_fmt=other&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1&amp;tp=webp" alt="图片" data-ratio="0.40555555555555556" data-w="900" data-imgfileid="100218869" src="https://mmbiz.qpic.cn/mmbiz_png/vI9nYe94fsGxu3P5YibTO899okS0X9WaLmQCtia4U8Eu1xWCz9t8Qtq9PH6T1bTcxibiaCIkGzAxpeRkRFYqibVmwSw/640?wx_fmt=other&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1&amp;tp=webp"></span><strong><span><span><span leaf="">一起“</span></span><span><strong><span><span leaf="">点</span></span></strong></span><span><strong><span><span leaf="">赞</span><span><span leaf="">”三连</span></span></span></strong></span><span><span leaf="">↓</span></span></span></strong></p><p><mp-style-type data-value="10000"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/-2eY3G_RKKe2N9V-ffqybQ",target="_blank" rel="noopener noreferrer">原文链接</a>
